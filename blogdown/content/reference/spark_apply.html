---
title: "Apply an R Function in Spark"

---
    
    <div class="doc-page">
    
    <div class="doc-page-index">
    <ul data-gumshoe>
    <li><a href="#arguments">Arguments</a></li>
            </ul>
    </div>

    <div class="doc-page-body">

    
    <p>Applies an R function to a Spark object (typically, a Spark DataFrame).</p>
    

    <div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>spark_apply</span>(<span class='no'>x</span>, <span class='no'>f</span>, <span class='kw'>columns</span> <span class='kw'>=</span> <span class='fu'>colnames</span>(<span class='no'>x</span>), <span class='kw'>memory</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>group_by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>packages</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</code></pre></div>
    
    <h2 id="arguments">Arguments</h2>
    <table class="ref-arguments">
    
    <colgroup>
      <col class="name" />
      <col class="desc" />
    </colgroup>  
      
    <tr>
      <td>x</td>
      <td><p>An object (usually a <code>spark_tbl</code>) coercable to a Spark DataFrame.</p></td>
    </tr>
    <tr>
      <td>f</td>
      <td><p>A function that transforms a data frame partition into a data frame.
The function <code>f</code> has signature <code>f(df, group1, group2, ...)</code> where
<code>df</code> is a data frame with the data to be processed and <code>group1</code> to
<code>groupN</code> contain the values of the <code>group_by</code> values. When
<code>group_by</code> is not specified, <code>f</code> takes only one argument.</p></td>
    </tr>
    <tr>
      <td>columns</td>
      <td><p>A vector of column names or a named vector of column types for
the transformed object. Defaults to the names from the original object and
adds indexed column names when not enough columns are specified.</p></td>
    </tr>
    <tr>
      <td>memory</td>
      <td><p>Boolean; should the table be cached into memory?</p></td>
    </tr>
    <tr>
      <td>group_by</td>
      <td><p>Column name used to group by data frame partitions.</p></td>
    </tr>
    <tr>
      <td>packages</td>
      <td><p>Boolean to distribute <code>.libPaths()</code> packages to each node,
  or a list of packages to distribute.</p>
<p>For offline clusters where <code>available.packages()</code> is not available,
  manually download the packages database from
 https://cran.r-project.org/web/packages/packages.rds and set
  <code>Sys.setenv(sparklyr.apply.packagesdb = "&lt;pathl-to-rds&gt;")</code>. Otherwise,
  all packages will be used by default.</p></td>
    </tr>
    <tr>
      <td>...</td>
      <td><p>Optional arguments; currently unused.</p></td>
    </tr>
    </table>
    

    
    </div>
    
    </div>

